<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="shared-styles.html">
<link rel="import" href="components/custom-datatable.html">

<dom-module id="all-view">
  <template>
    <custom-datatable toolbaritems="{{toolbaritems}}" appscrolltop="[[appscrolltop]]" tableclearall="{{tableclearall}}" tableheaders="{{tableheaders}}" minwidth="[[minwidth]]" tabledata="[[tabledata]]"></custom-datatable>
  </template>

  <script>
    Polymer({
      is: 'all-view',

      properties: {
        toolbaritems: {
          type: Number,
          notify: true
        },
        appscrolltop: {
          type: Number
        },
        tableclearall: {
          type: Boolean,
          notify: true
        },
        minwidth: {
          type: 'Number',
          value: 850
        },
        tableheaders: {
          type: Array,
          value: [
            {
              title: 'File',
              icon: 'arrow-upward'
            }, {
              title: 'Downloaded',
              icon: 'arrow-upward',
              conversion: 'size'
            }, {
              title: 'Status',
              icon: 'arrow-upward'
            }, {
              title: 'Size',
              icon: 'arrow-upward',
              conversion: 'size'
            }, {
              title: 'Last Try',
              icon: 'arrow-upward',
              conversion: 'recent'
            }
          ]
        },
        tabledata: {
          type: Array
        }
      },

      attached: function () {
        this.tabledata = [
          {
            "index": 15,
            "file": "Lizzie Oneal",
            "downloaded": 0,
            "status": "Mercado",
            "size": 65886,
            "lasttry": "2016-12-11T18:45:10"
          }, {
            "index": 5,
            "file": "Lizzie Oneal",
            "downloaded": 0,
            "status": "Mercado",
            "size": 65886,
            "lasttry": "2016-12-11T18:45:10"
          }
        ];
        // console.log(lodash.findIndex(foo, {'index': 15}));
        this.async(function () {
          this.set('tabledata.' + lodash.findIndex(this.tabledata, {'index': 15}) + '.file', 'charlotte');
        }, 4000);
        // setTimeout(() => { this.tabledata[0].file = 'ds'; }, 2000); setTimeout(() => {   console.log(this.tabledata); }, 5000);
      }
    });
  </script>
</dom-module>