<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="shared-styles.html">
<link rel="import" href="components/custom-datatable.html">

<dom-module id="all-view">
  <template>
    <custom-datatable toolbaritems="{{toolbaritems}}" appscrolltop="[[appscrolltop]]" tableclearall="{{tableclearall}}" tableheaders="{{tableheaders}}" minwidth="[[minwidth]]" tabledata="[[tabledata]]"></custom-datatable>
  </template>

  <script>
    Polymer({
      is: 'all-view',

      properties: {
        toolbaritems: {
          type: Number,
          notify: true
        },
        appscrolltop: {
          type: Number
        },
        tableclearall: {
          type: Boolean,
          notify: true
        },
        minwidth: {
          type: 'Number',
          value: 850
        },
        tableheaders: {
          type: Array,
          value: [
            {
              title: 'File',
              icon: 'arrow-upward'
            }, {
              title: 'Downloaded',
              icon: 'arrow-upward'
            }, {
              title: 'Status',
              icon: 'arrow-upward'
            }, {
              title: 'Size',
              icon: 'arrow-upward'
            }, {
              title: 'Last Try',
              icon: 'arrow-upward',
              conversion: 'recent'
            }
          ]
        },
        tabledata: {
          type: Array
        }
      },

      ready: function () {
        this.tabledata = [
          {
            "index": 15,
            "file": "Lola Oneal",
            "downloaded": "sss",
            "status": "Mercado",
            "size": 65886,
            "lasttry": "2016-12-11T18:45:10"
          }, {
            "index": 5,
            "file": "Lizzie Oneal",
            "downloaded": "sss",
            "status": "Mercado",
            "size": 65886,
            "lasttry": "2016-12-11T18:45:10"
          }, {
            "index": 7,
            "file": "L Oneal",
            "downloaded": "sss",
            "status": "Mercado",
            "size": 65886,
            "lasttry": "2016-12-11T18:45:10"
          }
        ];
        // for (var i = 0; i < 500; i++) {
          // remove 1 item from 0 index and add
          // this.pushName(i);
          // this.addName(i);
        // }
      },

      addName: function (i) {
        // setTimeout(() => {
        //   var goo = {
        //     "index": 16 + i,
        //     "file": "L Oneal " + i,
        //     "downloaded": "sss",
        //     "status": "Mercado",
        //     "size": 65886,
        //     "lasttry": "2016-12-11T18:45:10"
        //   };
        //   this.push('tabledata', goo);
        // }, 2000 + (i * 60));
      },

      pushName: function (i) {
        setTimeout(() => {
          // http://stackoverflow.com/questions/33219982/data-binding-to-array-in-polymer
          // 1 is according to table index
          this.set('tabledata.1.file', "L Oneal " + i);
        }, 2000 + (i * 60));
      }
    });
  </script>
</dom-module>